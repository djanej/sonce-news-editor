<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Sonce News Editor</title>
	<link rel="stylesheet" href="style.css" />
	<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚òÄÔ∏è</text></svg>" />
</head>
<body>
	<header class="app-header">
		<div class="header-content">
			<div class="title-section">
				<span class="sun-icon">‚òÄÔ∏è</span>
				<h1>Sonce News Editor</h1>
			</div>
			<p class="subtitle">Generate Markdown news posts with YAML frontmatter</p>
		</div>
	</header>

	<div id="restore-banner" class="restore-banner" hidden aria-live="polite" role="status">
		<span>Unsaved draft found.</span>
		<div class="restore-actions">
			<button type="button" id="restore-btn">Restore</button>
			<button type="button" id="dismiss-restore-btn">Dismiss</button>
		</div>
	</div>

	<main class="container">
		<section class="editor">
			<form id="news-form" novalidate>
				<div class="field">
					<label for="title">Title<span class="required">*</span></label>
					<input type="text" id="title" name="title" placeholder="Enter news title" required />
				</div>

				<div class="field-group">
					<div class="field">
						<label for="date">Date<span class="required">*</span></label>
						<input type="date" id="date" name="date" required />
					</div>
					<div class="field">
						<label for="author">Author</label>
						<input type="text" id="author" name="author" placeholder="Sindikata Sonce Koper" />
					</div>
				</div>

				<div class="field-group">
					<div class="field">
						<label for="slug">Slug</label>
						<input type="text" id="slug" name="slug" placeholder="auto-from-title" />
						<p class="hint">Used in filename and URLs (leave blank to auto-generate).</p>
					</div>
					<div class="field">
						<label for="tags">Tags / Category</label>
						<input type="text" id="tags" name="tags" placeholder="Comma separated, e.g. events, community" />
					</div>
				</div>

				<div id="tag-suggestions" class="tag-suggestions" aria-live="polite"></div>

				<div class="field">
					<label for="summary">Summary</label>
					<textarea id="summary" name="summary" rows="3" placeholder="Short excerpt shown on the listing page (optional)"></textarea>
					<p class="hint">If empty, it will be generated from the first part of the body.</p>
				</div>

				<div class="field-group">
					<div class="field">
						<label for="image">Hero Image URL</label>
						<input type="url" id="image" name="image" placeholder="/static/uploads/news/hero-image.jpg" />
						<p class="hint">Prefer paths under /static/uploads/news/</p>
					</div>
					<div class="field">
						<label for="imageAlt">Image Alt Text</label>
						<input type="text" id="imageAlt" name="imageAlt" placeholder="Short description for accessibility" />
					</div>
				</div>

				<div class="field-group">
					<div class="field">
						<label for="imageFile">Upload Hero Image</label>
						<input type="file" id="imageFile" name="imageFile" accept="image/*" />
						<p class="hint">Optional. If provided and saving to repo, it will be copied to /static/uploads/news/</p>
					</div>
					<div class="field">
						<label for="importMd">Import Markdown (.md)</label>
						<input type="file" id="importMd" name="importMd" accept="text/markdown,.md" />
						<p class="hint">Populate fields from an existing post file.</p>
					</div>
				</div>

				<div class="field">
					<label for="attachments">Additional Image Attachments</label>
					<input type="file" id="attachments" name="attachments" accept="image/*" multiple />
					<p class="hint">Optional. These will be inserted and saved to /static/uploads/news/YYYY/MM/</p>
				</div>

				<div id="drop-zone" class="drop-zone" aria-label="Drop images here or paste (Ctrl+V)">
					<div class="drop-zone-content">
						<span class="drop-icon">üìÅ</span>
						<p>Drag & drop images here or paste (Ctrl+V)</p>
					</div>
				</div>

				<div class="toolbar">
					<div class="toolbar-left">
						<button type="button" data-md="h1" title="Heading 1">H1</button>
						<button type="button" data-md="h2" title="Heading 2">H2</button>
						<button type="button" data-md="h3" title="Heading 3">H3</button>
						<button type="button" data-md="bold" title="Bold"><strong>B</strong></button>
						<button type="button" data-md="italic" title="Italic"><em>I</em></button>
						<button type="button" data-md="ul" title="Unordered List">‚Ä¢ List</button>
						<button type="button" data-md="ol" title="Ordered List">1. List</button>
						<button type="button" data-md="quote" title="Quote">" Quote"</button>
						<button type="button" data-md="code" title="Code Block">Code</button>
						<button type="button" data-md="link" title="Link">Link</button>
						<button type="button" id="insert-hero-btn" title="Insert Hero Image">Insert Hero</button>
						<button type="button" id="insert-attachments-btn" title="Insert Attachments">Insert Attachments</button>
					</div>
					<div class="toolbar-right">
						<label class="hint"><input type="checkbox" id="live-preview" /> Live Preview</label>
						<button type="button" id="cheat-sheet-btn" title="Markdown cheat sheet">Cheat Sheet</button>
						<button type="button" id="history-btn" title="Version history">History</button>
					</div>
				</div>

				<div class="field">
					<label for="body">Body Content (Markdown)</label>
					<textarea id="body" name="body" rows="14" placeholder="Write your news content here using Markdown..." aria-describedby="body-hint"></textarea>
					<p id="body-hint" class="hint">Use the toolbar above for quick formatting or type Markdown directly.</p>
				</div>

				<div class="templates">
					<div class="templates-row">
						<select id="template-select">
							<option value="">Select template‚Ä¶</option>
						</select>
						<button type="button" id="apply-template-btn">Apply</button>
						<button type="button" id="delete-template-btn">Delete</button>
					</div>
					<div class="templates-row">
						<input type="text" id="template-name" placeholder="Template name" />
						<button type="button" id="save-template-btn">Save as New</button>
					</div>
				</div>

				<div class="actions">
					<button type="button" id="preview-btn">Preview</button>
					<button type="button" id="download-btn" class="primary">Download Markdown</button>
					<button type="button" id="copy-md-btn">Copy Markdown</button>
					<button type="button" id="export-bundle-btn">Export Bundle</button>
					<button type="button" id="save-version-btn">Save Version</button>
					<button type="button" id="copy-json-btn">Copy JSON Entry</button>
					<button type="button" id="download-json-btn">Download JSON Entry</button>
				</div>

				<div id="lint-panel" class="lint-panel" aria-live="polite"></div>

				<div class="field">
					<label for="notes">Internal Notes (not exported)</label>
					<textarea id="notes" rows="3" placeholder="Add private notes‚Ä¶"></textarea>
				</div>

				<div class="drafts-actions">
					<button type="button" id="add-draft-btn">Add to Drafts</button>
					<button type="button" id="clear-drafts-btn">Clear Drafts</button>
					<button type="button" id="download-zip-btn">Download Drafts ZIP</button>
					<span id="drafts-count" class="hint">0 drafts</span>
				</div>

				<div class="repo-actions">
					<div class="repo-row">
						<button type="button" id="connect-repo-btn">Connect Repo Folder</button>
						<span id="repo-status" class="hint">Not connected</span>
					</div>
					<div class="repo-row">
						<button type="button" id="save-repo-btn" class="primary" disabled>Save to Repo</button>
						<button type="button" id="rebuild-index-btn" disabled>Rebuild Index</button>
						<span class="hint">Saves Markdown to content/news and updates content/news/index.json</span>
					</div>
				</div>
			</form>
		</section>

		<aside class="preview">
			<div class="preview-header">
				<h2>Preview</h2>
				<p class="hint">Renders Markdown below. Frontmatter not shown.</p>
			</div>
			<div id="preview-content" class="preview-content">
				<div class="placeholder">
					<span class="placeholder-icon">üìù</span>
					<p>Click Preview to see a live rendering here.</p>
				</div>
			</div>
		</aside>
	</main>

	<footer class="app-footer">
		<p>Made for Sonce ‚Äî Local Markdown generator. No uploads, all in your browser.</p>
	</footer>

	<div id="modal-overlay" class="modal-overlay" hidden>
		<div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
			<div class="modal-header">
				<h3 id="modal-title">Modal</h3>
				<button type="button" id="modal-close" aria-label="Close modal">√ó</button>
			</div>
			<div id="modal-body" class="modal-body"></div>
		</div>
	</div>

	<div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>
	<div id="drop-overlay" class="drop-overlay" hidden>
		<div class="drop-overlay-content">
			<span>Drop files to insert‚Ä¶</span>
			<button type="button" id="force-hide-overlay" class="force-hide-btn">√ó</button>
		</div>
	</div>

	<script src="script.js"></script>
</body>
</html>